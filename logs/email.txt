email-service  | Picked up JAVA_TOOL_OPTIONS: -Xmx256m
email-service  | 
email-service  |   .   ____          _            __ _ _
email-service  |  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
email-service  | ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
email-service  |  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
email-service  |   '  |____| .__|_| |_|_| |_\__, | / / / /
email-service  |  =========|_|==============|___/=/_/_/_/
email-service  | 
email-service  |  :: Spring Boot ::                (v4.0.0)
email-service  | 
email-service  | 2025-12-08T20:15:31.948Z  INFO 1 --- [email-service] [           main] c.c.F.EmailServiceApplication            : Starting EmailServiceApplication v0.0.1-SNAPSHOT using Java 17.0.17 with PID 1 (/app/app.jar started by root in /app)
email-service  | 2025-12-08T20:15:32.508Z  INFO 1 --- [email-service] [           main] c.c.F.EmailServiceApplication            : No active profile set, falling back to 1 default profile: "default"
email-service  | 2025-12-08T20:15:36.288Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://config-server:8888/
email-service  | 2025-12-08T20:15:36.315Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=application, profiles=[default], label=null, version=52dbfbe5eea8be36a0fff34718f1de972080125f, state=
email-service  | 2025-12-08T20:15:36.428Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://localhost:8888
email-service  | 2025-12-08T20:15:36.434Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Exception on Url - http://localhost:8888:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8888/email-service/default": Connection refused. Will be trying the next url if available
email-service  | 2025-12-08T20:15:36.453Z  WARN 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Could not locate PropertySource ([ConfigServerConfigDataResource@31c269fd uris = array<String>['http://localhost:8888'], optional = true, profiles = 'default']): I/O error on GET request for "http://localhost:8888/email-service/default": Connection refused
email-service  | 2025-12-08T20:15:36.458Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://config-server:8888/
email-service  | 2025-12-08T20:15:36.461Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Located environment: name=email-service, profiles=[default], label=null, version=52dbfbe5eea8be36a0fff34718f1de972080125f, state=
email-service  | 2025-12-08T20:15:36.493Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://localhost:8888
email-service  | 2025-12-08T20:15:36.496Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Exception on Url - http://localhost:8888:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8888/email-service/default": Connection refused. Will be trying the next url if available
email-service  | 2025-12-08T20:15:36.498Z  WARN 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Could not locate PropertySource ([ConfigServerConfigDataResource@503d56b5 uris = array<String>['http://localhost:8888'], optional = true, profiles = 'default']): I/O error on GET request for "http://localhost:8888/email-service/default": Connection refused
email-service  | 2025-12-08T20:15:36.530Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Fetching config from server at : http://localhost:8888
email-service  | 2025-12-08T20:15:36.533Z  INFO 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Exception on Url - http://localhost:8888:org.springframework.web.client.ResourceAccessException: I/O error on GET request for "http://localhost:8888/email-service/default": Connection refused. Will be trying the next url if available
email-service  | 2025-12-08T20:15:36.533Z  WARN 1 --- [email-service] [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Could not locate PropertySource ([ConfigServerConfigDataResource@72bca894 uris = array<String>['http://localhost:8888'], optional = true, profiles = 'default']): I/O error on GET request for "http://localhost:8888/email-service/default": Connection refused
email-service  | 2025-12-08T20:16:14.730Z  INFO 1 --- [email-service] [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=40e453a9-f630-3d6c-a715-750b9d49ff05
email-service  | 2025-12-08T20:16:18.548Z  INFO 1 --- [email-service] [           main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 9093 (http)
email-service  | 2025-12-08T20:16:18.700Z  INFO 1 --- [email-service] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
email-service  | 2025-12-08T20:16:18.704Z  INFO 1 --- [email-service] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
email-service  | 2025-12-08T20:16:19.157Z  INFO 1 --- [email-service] [           main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 42577 ms
email-service  | 2025-12-08T20:16:45.387Z  INFO 1 --- [email-service] [           main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestClient.
email-service  | 2025-12-08T20:16:46.639Z  WARN 1 --- [email-service] [           main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
email-service  | 2025-12-08T20:16:46.837Z  INFO 1 --- [email-service] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
email-service  | 2025-12-08T20:16:47.920Z DEBUG 1 --- [email-service] [           main] .a.r.l.a.MessagingMessageListenerAdapter : Inferred argument type for public void com.chubb.FlightBookingSystem.service.BookingEmailListener.handleBookingEvent(com.chubb.FlightBookingSystem.event.BookingEvent) is class com.chubb.FlightBookingSystem.event.BookingEvent
email-service  | 2025-12-08T20:16:48.349Z DEBUG 1 --- [email-service] [           main] o.s.a.r.l.SimpleMessageListenerContainer : No global properties bean
email-service  | 2025-12-08T20:16:48.874Z  INFO 1 --- [email-service] [           main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
email-service  | 2025-12-08T20:16:49.202Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
email-service  | 2025-12-08T20:16:49.284Z  INFO 1 --- [email-service] [           main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
email-service  | 2025-12-08T20:16:49.468Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
email-service  | 2025-12-08T20:16:49.469Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
email-service  | 2025-12-08T20:16:49.470Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
email-service  | 2025-12-08T20:16:49.470Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Application is null : false
email-service  | 2025-12-08T20:16:49.470Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
email-service  | 2025-12-08T20:16:49.470Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
email-service  | 2025-12-08T20:16:49.470Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
email-service  | 2025-12-08T20:16:55.078Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : The response status is 200
email-service  | 2025-12-08T20:16:55.113Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
email-service  | 2025-12-08T20:16:55.133Z  INFO 1 --- [email-service] [           main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
email-service  | 2025-12-08T20:16:55.145Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1765225015143 with initial instances count: 2
email-service  | 2025-12-08T20:16:55.204Z  INFO 1 --- [email-service] [           main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application EMAIL-SERVICE with eureka with status UP
email-service  | 2025-12-08T20:16:55.213Z  INFO 1 --- [email-service] [           main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1765225015209, current=UP, previous=STARTING]
email-service  | 2025-12-08T20:16:55.235Z  INFO 1 --- [email-service] [foReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_EMAIL-SERVICE/09dc4a3ccd3b:email-service:9093: registering service...
email-service  | 2025-12-08T20:16:55.577Z  INFO 1 --- [email-service] [           main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 9093 (http) with context path '/'
email-service  | 2025-12-08T20:16:55.611Z  INFO 1 --- [email-service] [           main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9093
email-service  | 2025-12-08T20:16:55.640Z DEBUG 1 --- [email-service] [           main] o.s.a.r.l.SimpleMessageListenerContainer : Starting Rabbit listener container.
email-service  | 2025-12-08T20:16:55.799Z  INFO 1 --- [email-service] [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rabbitmq:5672]
email-service  | 2025-12-08T20:16:56.420Z  INFO 1 --- [email-service] [foReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_EMAIL-SERVICE/09dc4a3ccd3b:email-service:9093 - registration status: 204
email-service  | 2025-12-08T20:16:57.553Z  INFO 1 --- [email-service] [           main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#37f41a81:0/SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926]
email-service  | 2025-12-08T20:16:57.789Z DEBUG 1 --- [email-service] [           main] o.s.amqp.rabbit.core.RabbitAdmin         : Initializing declarations
email-service  | 2025-12-08T20:16:57.990Z DEBUG 1 --- [email-service] [           main] o.s.a.r.c.CachingConnectionFactory       : Creating cached Rabbit Channel from AMQChannel(amqp://guest@172.18.0.3:5672/,1)
email-service  | 2025-12-08T20:16:58.191Z DEBUG 1 --- [email-service] [           main] o.s.amqp.rabbit.core.RabbitTemplate      : Executing callback RabbitAdmin$$Lambda$1605/0x000078f3327d0d38 on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.18.0.3:5672/,1), conn: Proxy@45e35a0d Shared Rabbit Connection: SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926]
email-service  | 2025-12-08T20:16:58.193Z DEBUG 1 --- [email-service] [           main] o.s.amqp.rabbit.core.RabbitAdmin         : declaring Queue 'booking.queue'
email-service  | 2025-12-08T20:16:58.356Z DEBUG 1 --- [email-service] [           main] o.s.amqp.rabbit.core.RabbitAdmin         : Declarations finished
email-service  | 2025-12-08T20:16:58.648Z DEBUG 1 --- [email-service] [ntContainer#0-1] o.s.amqp.rabbit.core.RabbitTemplate      : Executing callback RabbitAdmin$$Lambda$1615/0x000078f3327d74a8 on RabbitMQ Channel: Cached Rabbit Channel: AMQChannel(amqp://guest@172.18.0.3:5672/,1), conn: Proxy@45e35a0d Shared Rabbit Connection: SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926]
email-service  | 2025-12-08T20:16:58.706Z DEBUG 1 --- [email-service] [ntContainer#0-1] o.s.a.r.listener.BlockingQueueConsumer   : Starting consumer Consumer@5b1f0f26: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
email-service  | 2025-12-08T20:16:58.872Z DEBUG 1 --- [email-service] [ntContainer#0-1] o.s.a.r.listener.BlockingQueueConsumer   : Started on queue 'booking.queue' with tag amq.ctag-jtvxIo3N6aJdj4xrZbWspQ: Consumer@5b1f0f26: tags=[[amq.ctag-jtvxIo3N6aJdj4xrZbWspQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.18.0.3:5672/,1), conn: Proxy@45e35a0d Shared Rabbit Connection: SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926], acknowledgeMode=AUTO local queue size=0
email-service  | 2025-12-08T20:16:58.861Z DEBUG 1 --- [email-service] [pool-2-thread-3] o.s.a.r.listener.BlockingQueueConsumer   : ConsumeOK: Consumer@5b1f0f26: tags=[[]], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.18.0.3:5672/,1), conn: Proxy@45e35a0d Shared Rabbit Connection: SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926], acknowledgeMode=AUTO local queue size=0
email-service  | 2025-12-08T20:16:59.255Z  INFO 1 --- [email-service] [           main] c.c.F.EmailServiceApplication            : Started EmailServiceApplication in 128.94 seconds (process running for 148.761)
email-service  | 2025-12-08T20:21:49.404Z  INFO 1 --- [email-service] [rap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
email-service  | 2025-12-08T20:26:49.349Z  INFO 1 --- [email-service] [rap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
email-service  | 2025-12-08T20:29:21.677Z DEBUG 1 --- [email-service] [pool-2-thread-4] o.s.a.r.listener.BlockingQueueConsumer   : Storing delivery for consumerTag: 'amq.ctag-jtvxIo3N6aJdj4xrZbWspQ' with deliveryTag: '1' in Consumer@5b1f0f26: tags=[[amq.ctag-jtvxIo3N6aJdj4xrZbWspQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.18.0.3:5672/,1), conn: Proxy@45e35a0d Shared Rabbit Connection: SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926], acknowledgeMode=AUTO local queue size=0
email-service  | 2025-12-08T20:29:21.781Z DEBUG 1 --- [email-service] [ntContainer#0-1] o.s.a.r.listener.BlockingQueueConsumer   : Received message: (Body:'[B@45bbc24e(byte[77])' MessageProperties [headers={__TypeId__=com.chubb.FlightBookingSystem.event.BookingEvent}, contentType=application/json, contentEncoding=UTF-8, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=booking.exchange, receivedRoutingKey=booking.created, deliveryTag=1, consumerTag=amq.ctag-jtvxIo3N6aJdj4xrZbWspQ, consumerQueue=booking.queue])
email-service  | 2025-12-08T20:29:21.937Z DEBUG 1 --- [email-service] [ntContainer#0-1] .a.r.l.a.MessagingMessageListenerAdapter : Processing [GenericMessage [payload=BookingEvent(eventType=BOOKING_CREATED, pnr=ryOjB5, emailId=ananya04@gmail.com), headers={amqp_receivedDeliveryMode=PERSISTENT, amqp_receivedExchange=booking.exchange, amqp_deliveryTag=1, amqp_consumerQueue=booking.queue, amqp_redelivered=false, amqp_receivedRoutingKey=booking.created, amqp_contentEncoding=UTF-8, amqp_retryCount=0, id=6d8e86ab-e631-e292-f822-36cf4f2eb8cb, amqp_consumerTag=amq.ctag-jtvxIo3N6aJdj4xrZbWspQ, amqp_lastInBatch=false, contentType=application/json, __TypeId__=com.chubb.FlightBookingSystem.event.BookingEvent, timestamp=1765225761923}]]
email-service  | 2025-12-08T20:30:56.609Z DEBUG 1 --- [email-service] [pool-2-thread-5] o.s.a.r.listener.BlockingQueueConsumer   : Storing delivery for consumerTag: 'amq.ctag-jtvxIo3N6aJdj4xrZbWspQ' with deliveryTag: '2' in Consumer@5b1f0f26: tags=[[amq.ctag-jtvxIo3N6aJdj4xrZbWspQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@172.18.0.3:5672/,1), conn: Proxy@45e35a0d Shared Rabbit Connection: SimpleConnection@5ac7550a [delegate=amqp://guest@172.18.0.3:5672/, localPort=54926], acknowledgeMode=AUTO local queue size=0
email-service  | 2025-12-08T20:30:56.620Z DEBUG 1 --- [email-service] [ntContainer#0-1] o.s.a.r.listener.BlockingQueueConsumer   : Received message: (Body:'[B@730f814f(byte[79])' MessageProperties [headers={__TypeId__=com.chubb.FlightBookingSystem.event.BookingEvent}, contentType=application/json, contentEncoding=UTF-8, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=booking.exchange, receivedRoutingKey=booking.cancelled, deliveryTag=2, consumerTag=amq.ctag-jtvxIo3N6aJdj4xrZbWspQ, consumerQueue=booking.queue])
email-service  | 2025-12-08T20:30:56.629Z DEBUG 1 --- [email-service] [ntContainer#0-1] .a.r.l.a.MessagingMessageListenerAdapter : Processing [GenericMessage [payload=BookingEvent(eventType=BOOKING_CANCELLED, pnr=ryOjB5, emailId=ananya04@gmail.com), headers={amqp_receivedDeliveryMode=PERSISTENT, amqp_receivedExchange=booking.exchange, amqp_deliveryTag=2, amqp_consumerQueue=booking.queue, amqp_redelivered=false, amqp_receivedRoutingKey=booking.cancelled, amqp_contentEncoding=UTF-8, amqp_retryCount=0, id=b6c31ac0-2199-6a7c-5f08-71b63c86c625, amqp_consumerTag=amq.ctag-jtvxIo3N6aJdj4xrZbWspQ, amqp_lastInBatch=false, contentType=application/json, __TypeId__=com.chubb.FlightBookingSystem.event.BookingEvent, timestamp=1765225856623}]]
email-service  | 2025-12-08T20:31:49.320Z  INFO 1 --- [email-service] [rap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
