<div class="container">
  <div class="booking-container">

    <h2>Traveller Details</h2>

    <form (ngSubmit)="confirmBooking()" #bookForm="ngForm">

      <div class="card contact-card">
        <div class="card-header">Contact Information</div>
        <div class="form-group">
          <label>Email Address</label>
          <input type="email" name="email" [(ngModel)]="email" readonly required class="full-width">
        </div>
      </div>

      <div class="card passenger-card" *ngFor="let p of passengers; let i = index">
        <div class="card-header">Passenger {{ i + 1 }}</div>
        <div class="form-grid">

          <div class="form-group">
            <label>First Name</label>
            <input type="text" name="firstName{{i}}" [(ngModel)]="p.firstName" placeholder="First Name" required>
          </div>

          <div class="form-group">
            <label>Last Name</label>
            <input type="text" name="lastName{{i}}" [(ngModel)]="p.lastName" placeholder="Last Name" required>
          </div>

          <div class="form-group">
            <label>Age</label>
            <input type="number" name="age{{i}}" [(ngModel)]="p.age" placeholder="Age" required>
          </div>

          <div class="form-group">
            <label>Gender</label>
            <select name="gender{{i}}" [(ngModel)]="p.gender" required>
              <option value="MALE">Male</option>
              <option value="FEMALE">Female</option>
              <option value="OTHER">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label>Meal Preference</label>
            <select name="mealOption{{i}}" [(ngModel)]="p.mealOption" required>
              <option value="VEG">Veg</option>
              <option value="NONVEG">Non-Veg</option>
            </select>
          </div>

          <div class="form-group">
            <label>Departure Seat Number</label>
            <input type="text" name="depSeat{{i}}" [(ngModel)]="p.departureSeatNumber" placeholder="e.g. 12A" required>
          </div>

          <div class="form-group" *ngIf="isRoundTrip">
            <label>Return Seat Number</label>
            <input type="text" name="retSeat{{i}}" [(ngModel)]="p.returnSeatNumber" placeholder="e.g. 14C" [required]="isRoundTrip">
          </div>
        </div>
      </div>

      <div class="footer-action">
        <button type="submit" class="pay-btn" [disabled]="!bookForm.valid">CONFIRM & BOOK</button>
      </div>

    </form>

  </div>
</div>

<div class="modal-overlay" *ngIf="showSuccessModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 style="color: #e51919;">Booking Confirmed!</h3>
    </div>
    
    <div class="modal-body">
      <div class="success-icon">âœ“</div>
      <p>Your flight has been booked successfully.</p>
    </div>
    
    <div class="modal-actions single-action">
      <button class="modal-btn success" (click)="closeModal()">
        Go to Home
      </button>
    </div>
  </div>
</div>